# Migration file for creating "image" for academic programs.
#
# Detailed explanations for various elements of a migration
# YAML have been provided in migrate_plus.migration.program_data.yml

id: athena_pdf_docs
label: PDF docs associated to athenahealth.
migration_tags:
  - file
  - athena_pdf_docs
migration_group: ah_file_migration
migration_dependencies:
  required:
    - athena_pdf_files
# Source.
source:
  plugin: csv
  path: 'public://import/media.csv'
  header_row_count: 1
  # Unique ID.
  #
  # The source for images do not have any existing unique IDs. Hence,
  # we use the image name as unique IDs. This will ensure that every
  # image results in the creation of a unique file entity on the site.
  keys:
    - ID
  # Source field definitions.
  fields:
    ID: Unique Identifier
    Public URL: File Public URL
    File Path: File Location
    File Name: File Name
  constants:
    file_source_uri: public://sc_files_old
    file_dest_uri: 'public://sc_files'
# Destination.
destination:
  # We will be creating entities of type "file" this time.
  plugin: 'entity:media'
  default_bundle: 'document'
# Mappings.
process:
  name: File Name
  field_document/target_id:
    plugin: migration_lookup
    migration: athena_pdf_files
    source: ID
  field_pub_url_doc: Public URL
  status:
    plugin: default_value
    default_value: true
  uid:
    plugin: default_value
    default_value: 1
  moderation_state/state: 
    plugin: default_value
    default_value: 'published'
# Dependencies.
dependencies:
  enforced:
    module:
      - ah_file_migration
  plugin:
    - athena_pdf_files